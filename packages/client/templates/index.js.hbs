const axios = require('axios');
const set = require('lodash/set');

const functions = [
{{#each functions}}
  {{#if context}}
  ['{{context}}.{{name}}', '{{id}}'],
  {{else}}
  ['{{name}}', '{{id}}'],
  {{/if}}
{{/each}}
];

module.exports = functions.reduce(
  (acc, [name, id]) => set(acc, name, (...args) => axios.post(`{{apiBaseUrl}}/function/execute/${id}`, { args }).then(({ data }) => data)),
  {}
);
