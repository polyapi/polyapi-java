const poly = require('polyapi');

const handle = async (context, body) => {
  const POLY_USER_SESSION_ID = context.headers['openai-ephemeral-user-id'];

  {{{code}}}

  try {
    const result = await {{name}}(...body.args);
    return { body: result };
  } catch (e) {
    return {
      body: {
        message: e.message,
        stack: e.stack
      },
      statusCode: 500
    };
  }
}

module.exports = { handle };
